(this.webpackJsonpsltf=this.webpackJsonpsltf||[]).push([[0],{11:function(e,t,a){e.exports={center:"searchStyle_center__31Skh",pageHead:"searchStyle_pageHead__tnDQU",rightAlign:"searchStyle_rightAlign__2Fab_",centerVertical:"searchStyle_centerVertical__13xDj",centerScreen:"searchStyle_centerScreen__yNIZc",centerMessage:"searchStyle_centerMessage__3Hknt",actionButtons:"searchStyle_actionButtons__-oQMN",actionButton:"searchStyle_actionButton__1w0zd",resultItem:"searchStyle_resultItem__3fbrn",compRightAlign:"searchStyle_compRightAlign__ROqqS",arrow:"searchStyle_arrow__20Y9G","result-header":"searchStyle_result-header__3U77s","result-title":"searchStyle_result-title__wIIgA","result-subtitle":"searchStyle_result-subtitle__3gRWf","result-item":"searchStyle_result-item__2j52G","result-item-header":"searchStyle_result-item-header__14EMb","result-item-id":"searchStyle_result-item-id__2CWZL","result-item-total-time":"searchStyle_result-item-total-time__1KdNx","result-item-num-trains":"searchStyle_result-item-num-trains__2c5TC",resultItemBody:"searchStyle_resultItemBody__3z44V",resultHop:"searchStyle_resultHop__2RZhs",trainTravel:"searchStyle_trainTravel__1f0Vx",stations:"searchStyle_stations__2ji2g",station:"searchStyle_station__1TAfu",separator:"searchStyle_separator__1olaF",nodeDot:"searchStyle_nodeDot__2Eh0u",dashedLine:"searchStyle_dashedLine__24igm",straightLine:"searchStyle_straightLine__33bRA",times:"searchStyle_times__dnEEG",time:"searchStyle_time__1g555",switchAt:"searchStyle_switchAt__1Muzp",trainWagon:"searchStyle_trainWagon__1aj5s"}},147:function(e,t,a){e.exports=a.p+"static/media/playstore.14580db2.png"},178:function(e,t,a){e.exports=a(219)},183:function(e,t,a){},219:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(16),i=a.n(l),o=(a(183),a(184),a(5)),c=a(43),s=a(53),u=a(18),m=a(3),d=a(41),h=a(299),p=a(266),E=a(220),f=a(270),g=a(264),S=a(54),v=a(269),b=a(165),y=a(140),O=a.n(y),w=a(142),T=a.n(w),_=a(141),j=a.n(_),C=a(222),I=a(271),N=a(272),k=a(145),D=a.n(k),A=a(96),x=a.n(A),M=a(143),L=a.n(M),H=a(146),P=a.n(H),R=a(144),U=a.n(R),F=a(39),V=Object(s.a)((function(e){return{root:{display:"flex"},appBar:{zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{marginLeft:240,width:"calc(100% - ".concat(240,"px)"),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},menuButton:{marginRight:36},hide:{display:"none"},drawer:{width:240,flexShrink:0,whiteSpace:"nowrap"},drawerOpen:{width:240,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawerClose:Object(c.a)({transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),overflowX:"hidden",width:e.spacing(7)+1},e.breakpoints.up("sm"),{width:e.spacing(9)+1}),toolbar:Object(o.a)({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:e.spacing(0,1)},e.mixins.toolbar),content:{flexGrow:1,padding:e.spacing(3)}}}));function B(){var e,t,a=V(),n=Object(d.a)(),l=r.a.useState(!1),i=Object(u.a)(l,2),o=i[0],s=i[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(g.a,null),r.a.createElement(p.a,{position:"fixed",className:Object(m.a)(a.appBar,Object(c.a)({},a.appBarShift,o))},r.a.createElement(E.a,null,r.a.createElement(b.a,{color:"inherit","aria-label":"open drawer",onClick:function(){s(!0)},edge:"start",className:Object(m.a)(a.menuButton,Object(c.a)({},a.hide,o))},r.a.createElement(O.a,null)),r.a.createElement(F.a,{to:"/"},r.a.createElement(S.a,{variant:"h6",noWrap:!0},"Trains - Sri Lanka")))),r.a.createElement(h.a,{variant:"permanent",className:Object(m.a)(a.drawer,(e={},Object(c.a)(e,a.drawerOpen,o),Object(c.a)(e,a.drawerClose,!o),e)),classes:{paper:Object(m.a)((t={},Object(c.a)(t,a.drawerOpen,o),Object(c.a)(t,a.drawerClose,!o),t))}},r.a.createElement("div",{className:a.toolbar},r.a.createElement(b.a,{onClick:function(){s(!1)}},"rtl"===n.direction?r.a.createElement(j.a,null):r.a.createElement(T.a,null))),r.a.createElement(v.a,null),r.a.createElement(f.a,null,r.a.createElement(F.a,{to:"/"},r.a.createElement(C.a,{button:!0,key:"search"},r.a.createElement(I.a,null,r.a.createElement(x.a,null)),r.a.createElement(N.a,{primary:"Search"}))),r.a.createElement(F.a,{to:"/stations"},r.a.createElement(C.a,{button:!0,key:"list"},r.a.createElement(I.a,null,r.a.createElement(L.a,null)),r.a.createElement(N.a,{primary:"Station List"}))),r.a.createElement(F.a,{to:"/review"},r.a.createElement(C.a,{button:!0,key:"review"},r.a.createElement(I.a,null,r.a.createElement(U.a,null)),r.a.createElement(N.a,{primary:"Review Changes"})))),r.a.createElement(v.a,null),r.a.createElement(f.a,null,r.a.createElement("a",{href:"mailto:sltf-dev@googlegroups.com"},r.a.createElement(C.a,{button:!0,key:"contact"},r.a.createElement(I.a,null,r.a.createElement(D.a,null)),r.a.createElement(N.a,{primary:"Contact"}))),r.a.createElement(F.a,{to:"about"},r.a.createElement(C.a,{button:!0,key:"about"},r.a.createElement(I.a,null,r.a.createElement(P.a,null)),r.a.createElement(N.a,{primary:"About"}))))))}var G=a(63),q=a(64),z=a(67),K=a(66),W=a(13),Y=a.n(W),X=a(167),Q=a(296),Z=a(27),J=a(276),$=a(300),ee=a(51),te=a(23),ae=a.n(te),ne=a(11),re=a.n(ne),le="production"===Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_STAGE?{API_HOST:"http://www.lktrains.com",GA_KEY:"UA-41010626-6",CLIENT_ID:"606680519255-9rv3jhki5qushmjlfhftuooussbf26j4.apps.googleusercontent.com"}:{API_HOST:"http://localhost:8080",GA_KEY:"UA-41010626-7",CLIENT_ID:"606680519255-o3l0nbsu5chko9l09icctr2oavugo729.apps.googleusercontent.com"},ie=Object(o.a)({},le),oe=a(42),ce=a(273),se=a(298),ue=a(297),me=a(150),de=a.n(me),he=a(274),pe=a(166),Ee=a(277),fe=a(147),ge=a.n(fe);function Se(e){return r.a.createElement(ue.a,Object.assign({elevation:6,variant:"filled"},e))}var ve=function(e){Object(z.a)(a,e);var t=Object(K.a)(a);function a(){var e;Object(G.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={loading:!0,allStations:[],sourceStation:null,destinationStation:null,time:null,date:null,error:null},e.setSourceStation=function(t,a){e.setState({sourceStation:a})},e.setDestinationStation=function(t,a){e.setState({destinationStation:a})},e.handleDepartureTimeChange=function(t){var a=e.state.time;a=t.format("hh:mmA"),e.setState({time:a})},e.handleDepartureDateChange=function(t){var a=e.state.date;a=t.format("YYYY-MM-DD"),e.setState({date:a})},e.handleSnackBarOnClose=function(){e.setState({error:null})},e.search=function(){var t,a=e.state,n=a.sourceStation,r=a.destinationStation,l=a.time,i=a.date;n&&null!==n.name?r&&null!==r.name?(t="/schedule/from/".concat(n.name,"/to/").concat(r.name),null!==i?t=null!==l?"".concat(t,"/").concat(l,"/onward/on/").concat(i):"".concat(t,"/12:00AM/onward/on/").concat(i):null!==l&&(t="".concat(t,"/").concat(l,"/onward")),t&&(window.location=t)):e.setState({error:"Please provide the station you want to go to"}):e.setState({error:"Please provide the station you want to search from"})},e.swap=function(){var t=e.state,a=t.sourceStation,n=t.destinationStation,r=a;a=n,n=r,e.setState({sourceStation:a,destinationStation:n})},e}return Object(q.a)(a,[{key:"componentDidMount",value:function(){var e=this;Y.a.get("".concat(ie.API_HOST,"/api/station/list")).then((function(t){e.setState({allStations:t.data,loading:!1})}))}},{key:"render",value:function(){var e;if(this.state.loading)e=r.a.createElement(ce.a,{className:re.a.centerScreen});else{var t=this.state.destinationStation?this.state.destinationStation.name:"",a=this.state.sourceStation?this.state.sourceStation.name:"",n=this.state.allStations.filter((function(e){return e.name!==t})).sort((function(e,t){return e.name<t.name?-1:1})),l=this.state.allStations.filter((function(e){return e.name!==a})).sort((function(e,t){return e.name<t.name?-1:1})),i=this.state.time?ae()(this.state.time,"hh:mmA"):ae()(),o=this.state.date?ae()(this.state.date,"YYYY-MM-DD"):ae()();e=r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",{className:"".concat(re.a.center," ").concat(re.a.pageHead)},"Search Trains"),r.a.createElement("br",null),r.a.createElement("p",{className:re.a.center},"To start, let us know where you are and where you need to go to"),r.a.createElement(he.a,{container:!0,direction:"column",spacing:2},r.a.createElement(he.a,{item:!0,container:!0,justify:"center"},r.a.createElement(he.a,{item:!0,xs:12,sm:6},r.a.createElement(Q.a,{id:"source",onChange:this.setSourceStation,options:n,getOptionLabel:function(e){return e.name},value:this.state.sourceStation,renderInput:function(e){return r.a.createElement(X.a,Object.assign({},e,{label:"I'm at",variant:"outlined",fullWidth:!0}))}}))),r.a.createElement(he.a,{item:!0,container:!0,justify:"center"},r.a.createElement(he.a,{item:!0},r.a.createElement(pe.a,{size:"sm",outline:!0,onClick:this.swap},r.a.createElement(de.a,null)))),r.a.createElement(he.a,{item:!0,container:!0,justify:"center"},r.a.createElement(he.a,{item:!0,xs:12,sm:6},r.a.createElement(Q.a,{id:"destination",onChange:this.setDestinationStation,options:l,getOptionLabel:function(e){return e.name},value:this.state.destinationStation,renderInput:function(e){return r.a.createElement(X.a,Object.assign({},e,{label:"I want to go to",variant:"outlined",fullWidth:!0}))}}))),r.a.createElement(he.a,{item:!0,container:!0,justify:"center"},r.a.createElement(he.a,{item:!0,container:!0,sm:6,xs:12,spacing:2},r.a.createElement(he.a,{item:!0,xs:12,sm:6},r.a.createElement(Z.a,{utils:ee.a,id:"time"},r.a.createElement(J.a,{label:"Date",onChange:this.handleDepartureDateChange,value:o,fullWidth:!0,KeyboardButtonProps:{"aria-label":"Change date"}}))),r.a.createElement(he.a,{item:!0,sm:6,xs:12},r.a.createElement(Z.a,{utils:ee.a,id:"time"},r.a.createElement($.a,{label:"Departure time",onChange:this.handleDepartureTimeChange,value:i,fullWidth:!0,KeyboardButtonProps:{"aria-label":"Change time"}}))))),r.a.createElement(he.a,{item:!0,container:!0,justify:"center"},r.a.createElement(he.a,{item:!0,sm:6,xs:12,justify:"flex-end"},r.a.createElement("span",{className:re.a.compRightAlign},r.a.createElement(pe.a,{color:"primary",onClick:this.search,variant:"contained",size:"large"},"Search")))),r.a.createElement("hr",null),r.a.createElement(he.a,{item:!0,container:!0,justify:"center"},r.a.createElement(he.a,{item:!0,sm:3,xs:8,justify:"center"},r.a.createElement("a",{href:"https://play.google.com/store/apps/details?id=org.pulasthi.tfsl.android"},r.a.createElement("img",{src:ge.a,height:"auto",width:"100%",alt:"Download at PlayStore"}))))),r.a.createElement(se.a,{open:null!==this.state.error,autoHideDuration:5e3,onClose:this.handleSnackBarOnClose},r.a.createElement(Se,{severity:"error"},this.state.error)))}return r.a.createElement(Ee.a,null,r.a.createElement(oe.Helmet,null,r.a.createElement("title",null,"Search Trains | Trains Sri Lanka"),r.a.createElement("meta",{name:"description",content:"Search train schedules in Sri Lanka smartly, View timetables of trains and railway stations, and many more"})),e)}}]),a}(n.Component),be=a(25),ye=a(36),Oe=a(22),we=function(){return{type:"FETCH_STATIONS_REQUEST"}},Te=function(){return function(e){e(we),Y.a.get("".concat(ie.API_HOST,"/api/station/list")).then((function(t){var a=t.data;e(function(e){return{type:"FETCH_STATIONS_SUCCESS",payload:e}}(a))})).catch((function(t){var a=t.message;e(function(e){return{type:"FETCH_STATIONS_FAILURE",payload:e}}(a))}))}},_e=function(){return{type:"FETCH_PENDING_CHANGES_REQUEST"}},je=function(){return{type:"VOTE_PENDING_CHANGE_REQUEST"}},Ce=a(278),Ie=a(279),Ne=a(224),ke=Object(s.a)({loadingContainer:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"},pageHead:{textAlign:"center",padding:"10px"}});var De=Object(Oe.b)((function(e){return{stationData:e.stations,authData:e.auth}}),(function(e){return{fetchStations:function(){return e(Te())}}}))((function(e){var t=e.stationData,a=(e.authData,e.fetchStations);Object(n.useEffect)((function(){a()}),[]);var l=ke(),i=Object(n.useState)(""),o=Object(u.a)(i,2),c=o[0],s=o[1],m="";if(t.loading)m=r.a.createElement(ce.a,{className:l.centerScreen});else if(t.error)m=r.a.createElement("h2",{className:l.loadingContainer},t.error);else{var d=t.stations.filter((function(e){return e.name.toLowerCase().indexOf(c.toLowerCase())>=0})).sort((function(e,t){return e.name>t.name?1:t.name>e.name?-1:0})).map((function(e){return r.a.createElement(he.a,{item:!0,xs:12,key:e.id},r.a.createElement(Ce.a,{elevation:3},r.a.createElement(Ie.a,null,r.a.createElement(F.a,{to:"/schedule/station/".concat(e.name)},r.a.createElement(he.a,{container:!0,direction:"row"},r.a.createElement(he.a,{item:!0,xs:12,sm:!0},r.a.createElement(S.a,{variant:"h5"},e.name)))))))}));m=r.a.createElement(Ee.a,null,r.a.createElement("h1",{className:l.pageHead},"Railway Stations Index"),r.a.createElement(X.a,{variant:"outlined",onChange:function(e){s(e.target.value)},margin:"normal",fullWidth:!0,InputProps:{endAdornment:r.a.createElement(Ne.a,{position:"start"},r.a.createElement(x.a,null))}}),r.a.createElement(he.a,{container:!0,spacing:1},d))}return r.a.createElement("div",null,r.a.createElement(oe.Helmet,null,r.a.createElement("title",null,"Railway Stations of Sri Lanka | Trains - Sri Lanka"),r.a.createElement("meta",{name:"description",content:"List of railway stations in Sri Lanka, along with their telephone numbers and schedules"})),m)})),Ae=a(280),xe=a(281),Me=a(282),Le=a(283),He=a(284),Pe=a(285),Re=a(286),Ue=a(287),Fe=a(301),Ve=a(288),Be=a(289),Ge=Object(Oe.b)((function(e){return{isSignedIn:e.auth.isLoggedIn,userId:e.auth.userId}}))((function(e){var t=e.dispatch,a=e.isSignedIn,l=e.userId,i=Object(n.useState)(null),o=Object(u.a)(i,2),c=o[0],s=o[1];Object(n.useEffect)((function(){var e={clientId:ie.CLIENT_ID,scope:"openid"};window.gapi.load("client:auth2",(function(){window.gapi.client.init(e).then((function(){s(window.gapi.auth2.getAuthInstance()),m(window.gapi.auth2.getAuthInstance().isSignedIn.get()),window.gapi.auth2.getAuthInstance().isSignedIn.listen(m)}))}))}),[]);var m=function(e){t(e?function(e,t){return{type:"LOG_IN",payload:{userId:e,idToken:t}}}(window.gapi.auth2.getAuthInstance().currentUser.get().getBasicProfile().getEmail(),window.gapi.auth2.getAuthInstance().currentUser.get().getAuthResponse().id_token):{type:"LOG_OUT"})},d=function(){c.signIn()},h=function(){c.signOut()};return r.a.createElement("div",null,null===a?null:a?r.a.createElement("div",null,r.a.createElement("span",null,"Logged in as : ",l," "),r.a.createElement(pe.a,{color:"secondary",variant:"contained",onClick:h},"Logout")):r.a.createElement("div",null,r.a.createElement("p",null,"You should be logged in to request data changes or vote changes requested by others. Your email or any other detail won't be shown publicly nor shared with anyone."),r.a.createElement(pe.a,{color:"primary",onClick:d},"Sign In with Google")))}));var qe=Object(Oe.b)((function(e){return{authState:e.auth}}))((function(e){var t=e.authState,a=Object(n.useState)({name:"",nameSi:"",classes:[],startStation:0,dh:0,dm:0,endStation:0,ah:0,am:0,availability:0,type:""}),l=Object(u.a)(a,2),i=l[0],c=l[1],s=Object(n.useState)([]),m=Object(u.a)(s,2),d=m[0],h=m[1],p=Object(n.useState)([]),E=Object(u.a)(p,2),f=E[0],g=E[1],S=Object(n.useState)([]),v=Object(u.a)(S,2),b=v[0],y=v[1],O=Object(n.useState)([]),w=Object(u.a)(O,2),T=w[0],_=w[1],j=Object(n.useState)({show:!1,msg:""}),C=Object(u.a)(j,2),I=C[0],N=C[1],k=Object(n.useState)(!1),D=Object(u.a)(k,2),A=D[0],x=D[1];Object(n.useEffect)((function(){Y.a.get("".concat(ie.API_HOST,"/api/metadata/availabilities")).then((function(e){y(e.data)})),Y.a.get("".concat(ie.API_HOST,"/api/metadata/classes")).then((function(e){h(e.data)})),Y.a.get("".concat(ie.API_HOST,"/api/metadata/trainTypes")).then((function(e){g(e.data)})),Y.a.get("".concat(ie.API_HOST,"/api/station/list")).then((function(e){_(e.data)}))}),[]);var M=function(e){var t=i.classes.map((function(e){return e}));t.push(e.target.value),c(Object(o.a)(Object(o.a)({},i),{},{classes:t}))},L=function(e){var t=i.classes.map((function(e){return e}));t=t.filter((function(t){return t!==e.target.value})),c(Object(o.a)(Object(o.a)({},i),{},{classes:t}))},H=function(){N({show:!I.show})},P=ae()("".concat(i.ah,":").concat(i.am),"HH:mm"),R=ae()("".concat(i.dh,":").concat(i.dm),"HH:mm"),U=b.map((function(e){return r.a.createElement("option",{value:e.code,key:e.code},e.displayName)})),F=f.map((function(e){return r.a.createElement("option",{value:e,key:e},e)})),V=d.map((function(e){return r.a.createElement(Ae.a,{inline:!0,check:!0,key:e},r.a.createElement(xe.a,{check:!0},i.classes.includes(e)?r.a.createElement(Me.a,{type:"checkbox",onChange:L,checked:!0,value:e}):r.a.createElement(Me.a,{type:"checkbox",onChange:M,value:e}),e))})),B=T.filter((function(e){return e.id!==i.endStation})).sort((function(e,t){return e.name<t.name?-1:1})),G=T.filter((function(e){return e.id!==i.startStation})).sort((function(e,t){return e.name<t.name?-1:1}));return r.a.createElement(Le.a,null,r.a.createElement(oe.Helmet,null,r.a.createElement("title",null,"Trains - Sri Lanka | Create New Train"),r.a.createElement("meta",{name:"description",content:"Add New Train"})),r.a.createElement("h2",null,"Add New Train"),r.a.createElement(Ge,null),t.isLoggedIn?r.a.createElement(He.a,null,r.a.createElement(Ae.a,null,r.a.createElement(xe.a,{for:"name"},"Train Name"),r.a.createElement(Me.a,{type:"text",name:"station",id:"station",value:i.name,onChange:function(e){c(Object(o.a)(Object(o.a)({},i),{},{name:e.target.value}))}})),r.a.createElement(Ae.a,null,r.a.createElement(xe.a,{for:"nameSi"},"Train Name(Sinhala)"),r.a.createElement(Me.a,{type:"text",name:"nameSi",id:"nameSi",value:i.nameSi,onChange:function(e){c(Object(o.a)(Object(o.a)({},i),{},{nameSi:e.target.value}))}})),r.a.createElement(Pe.a,{form:!0},r.a.createElement(Re.a,null,r.a.createElement(Ae.a,null,r.a.createElement(xe.a,{for:"source"},"Starting Station")))),r.a.createElement(Pe.a,{form:!0},r.a.createElement(Re.a,{md:6},r.a.createElement(Ae.a,null,r.a.createElement(Q.a,{id:"startStation",onChange:function(e,t){var a=t?parseInt(t.id):0;c(Object(o.a)(Object(o.a)({},i),{},{startStation:a}))},options:B,getOptionLabel:function(e){return e.name},renderInput:function(e){return r.a.createElement(X.a,Object.assign({},e,{label:"Station name",variant:"outlined",fullWidth:!0}))}}))),r.a.createElement(Re.a,{md:6},r.a.createElement(Ae.a,null,r.a.createElement(Z.a,{utils:ee.a,id:"departureTime"},r.a.createElement($.a,{label:"Departure time",value:R,onChange:function(e){c(Object(o.a)(Object(o.a)({},i),{},{dh:e.hour(),dm:e.minute()}))},KeyboardButtonProps:{"aria-label":"change time"}}))))),r.a.createElement(Pe.a,{form:!0},r.a.createElement(Re.a,null,r.a.createElement(Ae.a,null,r.a.createElement(xe.a,{for:"source"},"Destination Station")))),r.a.createElement(Pe.a,{form:!0},r.a.createElement(Re.a,{md:6},r.a.createElement(Ae.a,null,r.a.createElement(Q.a,{id:"endStation",onChange:function(e,t){var a=t?parseInt(t.id):0;c(Object(o.a)(Object(o.a)({},i),{},{endStation:a}))},options:G,getOptionLabel:function(e){return e.name},renderInput:function(e){return r.a.createElement(X.a,Object.assign({},e,{label:"Station name",variant:"outlined",fullWidth:!0}))}}))),r.a.createElement(Re.a,{md:6},r.a.createElement(Ae.a,null,r.a.createElement(Z.a,{utils:ee.a,id:"arrivalTime"},r.a.createElement($.a,{label:"Arrival time",value:P,onChange:function(e){c(Object(o.a)(Object(o.a)({},i),{},{ah:e.hour(),am:e.minute()}))},KeyboardButtonProps:{"aria-label":"change time"}}))))),r.a.createElement(Ae.a,null,r.a.createElement(xe.a,{for:"avb"},"Availability"),r.a.createElement(Me.a,{type:"select",name:"avb",id:"avb",onChange:function(e){c(Object(o.a)(Object(o.a)({},i),{},{availability:e.target.value}))},key:i.availability,defaultValue:i.availability},r.a.createElement("option",{value:"",key:"unchanged"},"--Select--"),U)),r.a.createElement(Ae.a,null,r.a.createElement(xe.a,{for:"type"},"Type"),r.a.createElement(Me.a,{type:"select",name:"type",id:"type",onChange:function(e){c(Object(o.a)(Object(o.a)({},i),{},{type:e.target.value}))},key:i.type,defaultValue:i.type},r.a.createElement("option",{value:"",key:"unchanged"},"--Select--"),F)),r.a.createElement(Ae.a,null,r.a.createElement("p",null,"Classes Available"),V),r.a.createElement(Ue.a,{color:"primary",onClick:function(){x(!0);var e=i.classes.join(", ");if(0===i.startStation||0===i.endStation)return N({show:!0,msg:"Starting station or Destination station cannot be empty"}),void x(!1);var a={train:{name:i.name,nameSi:i.nameSi,classes:e,startSt:i.startStation,endSt:i.endStation,avbValue:i.availability,type:i.type},srcDh:i.dh,srcDm:i.dm,dstAh:i.ah,dstAm:i.am};console.log("authState",t);var n={headers:{X_ID_TOKEN:t.idToken}};Y.a.post("".concat(ie.API_HOST,"/api/train/"),a,n).then((function(e){N({show:!0,msg:"Request Successful!"}),c({name:"",nameSi:"",classes:[],startStation:0,dh:0,dm:0,endStation:0,ah:0,am:0,availability:0,type:""})})).catch((function(e){N({show:!0,msg:"Request Failed!"})})).finally((function(){x(!1)}))},disabled:A},"Create")):"",r.a.createElement(Fe.a,{isOpen:I.show,toggle:H},r.a.createElement(Ve.a,null,r.a.createElement("p",null,I.msg)),r.a.createElement(Be.a,null,r.a.createElement(Ue.a,{color:"primary",onClick:H},"OK"))))})),ze=a(290),Ke=function(e,t,a){var n="".concat(t," \u2192 ").concat(a);return e&&(n="".concat(e," (").concat(n,")")),n};var We=Object(Oe.b)((function(e){return{authState:e.auth}}))((function(e){var t=e.isOpen,a=e.setOpen,l=e.trainStop,i=e.authState,c=Object(n.useState)({}),s=Object(u.a)(c,2),m=s[0],d=s[1];if(null==l)return null;if(null==m||m.id!==l.id){var h={id:l.id,ah:l.ah,am:l.am,dh:l.dh,dm:l.dm,platform:l.platform};d(h)}var p=Ke(l.train.name,l.train.startStation,l.train.endStation),E=ae()("".concat(m.ah,":").concat(m.am),"HH:mm"),f=ae()("".concat(m.dh,":").concat(m.dm),"HH:mm");return r.a.createElement(Fe.a,{isOpen:t,toggle:function(){return a(!t,null,null)},zIndex:1300},r.a.createElement(ze.a,{toggle:function(){a(!t,null,null)}},"Edit Train Stop"),r.a.createElement(Ve.a,null,r.a.createElement(Ge,null),i.isLoggedIn?r.a.createElement(r.a.Fragment,null,r.a.createElement(Ae.a,null,r.a.createElement(xe.a,{for:"name"},"Station Name"),r.a.createElement(Me.a,{type:"text",name:"station",id:"station",value:l.station,readOnly:!0})),r.a.createElement(Ae.a,null,r.a.createElement(xe.a,{for:"nameSi"},"Train"),r.a.createElement(Me.a,{type:"text",name:"train",id:"train",value:p,readOnly:!0})),r.a.createElement(Ae.a,null,r.a.createElement(Z.a,{utils:ee.a},r.a.createElement($.a,{className:"mx-1",label:"Arrival Time",value:E,onChange:function(e){return function(e){var t=Object(o.a)({},m);t.ah=e.hour(),t.am=e.minute();var a=e.add(1,"m");t.dh=a.hour(),t.dm=a.minute(),d(t)}(e)},KeyboardButtonProps:{"aria-label":"change time"}}),r.a.createElement($.a,{className:"mx-1",label:"Departure Time",value:f,onChange:function(e){return function(e){var t=Object(o.a)({},m);t.dh=e.hour(),t.dm=e.minute(),d(t)}(e)},KeyboardButtonProps:{"aria-label":"change time"}}))),r.a.createElement(Ae.a,null,r.a.createElement(xe.a,{for:"platform"},"Platform"),r.a.createElement(Me.a,{type:"text",name:"platform",id:"platform",value:m.platform,onChange:function(e){return function(e){var t=Object(o.a)({},m);t.platform=e.target.value,d(t)}(e)}}))):""),r.a.createElement(Be.a,null,i.isLoggedIn?r.a.createElement(Ue.a,{color:"primary",onClick:function(e){return function(){var e={headers:{X_ID_TOKEN:i.idToken}};Y.a.put("".concat(ie.API_HOST,"/api/schedule/").concat(m.id),m,e).then((function(e){return a(!1,"Request Successful!","success")})).catch((function(e){return a(!1,"Request Failed!","error")}))}()}},"Request Update"):"",r.a.createElement(Ue.a,{color:"secondary",onClick:function(){a(!t,null,null)}},"Cancel")))}));var Ye=Object(Oe.b)((function(e){return{authState:e.auth}}))((function(e){var t=e.isOpen,a=e.setOpen,n=e.trainStopId,l=e.stationName,i=e.trainName,o=e.authState;return r.a.createElement(Fe.a,{isOpen:t,toggle:function(){return a(!t,null,null)},zIndex:1300},r.a.createElement(ze.a,{toggle:function(){return a(!t,null,null)}},"Edit Station"),r.a.createElement(Ve.a,null,r.a.createElement(Ge,null),o.isLoggedIn?r.a.createElement("div",null,r.a.createElement("hr",null),r.a.createElement("p",null,"Are you sure you want to delete the ",i," train stop at ",l,"?")):""),r.a.createElement(Be.a,null,o.isLoggedIn?r.a.createElement(Ue.a,{color:"danger",onClick:function(){!function(){var e={headers:{X_ID_TOKEN:o.idToken}};Y.a.delete("".concat(ie.API_HOST,"/api/schedule/").concat(n),e).then((function(e){a(!1,"Request Successful!","success")})).catch((function(e){return a(!1,"Request Failed!","error")}))}(),a(!t,null,null)}},"Request Delete"):"",r.a.createElement(Ue.a,{color:"secondary",onClick:function(){return a(!t,null,null)}},"Cancel")))})),Xe=a(291),Qe=a(162),Ze=a(292),Je=a(6);var $e=Object(Oe.b)((function(e){return{authState:e.auth}}),(function(e){return{updateStation:function(t,a){return e(function(e,t){return function(a){var n={headers:{X_ID_TOKEN:t.idToken}};Y.a.put("".concat(ie.API_HOST,"/api/station/").concat(e.id),e,n).then((function(e){a({type:"UPDATE_STATION_SUCCESS"})})).catch((function(e){a(function(e){return{type:"UPDATE_STATION_FAILURE",payload:e}}(e.message))}))}}(t,a))}}}))((function(e){var t=e.isOpen,a=e.setOpen,l=e.station,i=e.updateStation,c=e.authState,s=Object(n.useState)(l),m=Object(u.a)(s,2),d=m[0],h=m[1];return l&&r.a.createElement(Fe.a,{isOpen:t,toggle:function(){return a(!t,null,null)},zIndex:1300},r.a.createElement(ze.a,{toggle:function(){return a(!t,null,null)}},"Edit Station"),r.a.createElement(Ve.a,null,r.a.createElement(Ge,null),c.isLoggedIn?r.a.createElement("div",null,r.a.createElement(Ae.a,null,r.a.createElement(xe.a,{for:"name"},"Station Name"),r.a.createElement(Me.a,{type:"text",name:"name",id:"name",value:d.name,onChange:function(e){var t=Object(o.a)(Object(o.a)({},d),{},{name:e.target.value});h(t)}})),r.a.createElement(Ae.a,null,r.a.createElement(xe.a,{for:"telId"},"Telephone"),r.a.createElement(Me.a,{type:"text",name:"tel",id:"tel",value:d.tel,onChange:function(e){var t=Object(o.a)(Object(o.a)({},d),{},{tel:e.target.value});h(t)}})),r.a.createElement(Ae.a,null,r.a.createElement(xe.a,{for:"lat"},"Latitude"),r.a.createElement(Me.a,{type:"text",name:"lat",id:"lat",value:d.lat,onChange:function(e){var t=Object(o.a)(Object(o.a)({},d),{},{lat:e.target.value});h(t)}})),r.a.createElement(Ae.a,null,r.a.createElement(xe.a,{for:"Longitude"},"Longitude"),r.a.createElement(Me.a,{type:"text",name:"lng",id:"lng",value:d.lng,onChange:function(e){var t=Object(o.a)(Object(o.a)({},d),{},{lng:e.target.value});h(t)}}))):""),r.a.createElement(Be.a,null,c.isLoggedIn?r.a.createElement(Ue.a,{color:"primary",onClick:function(){i(d,c),a(!t,"Request Sent! ","success")}},"Request Update"):"",r.a.createElement(Ue.a,{color:"secondary",onClick:function(){return a(!t,null,null)}},"Cancel")))})),et=function(e){Object(z.a)(a,e);var t=Object(K.a)(a);function a(){var e;Object(G.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={stationLoading:!0,scheduleLoading:!0,station:{},stops:[],editStopData:{id:"",ah:"",am:"",dh:"",dm:"",platform:"",station:"",train:""},deleteStopData:{trainName:"",trainStopId:0},showEditModal:!1,showDeleteStopModal:!1,showEditStationModal:!1,anchorEl:null,menuStop:null,alert:{open:!1,text:"",level:""}},e.showEditTrainStopModal=function(t){e.setState({showEditModal:t})},e.showDeleteTrainStopModal=function(t){e.setState({showDeleteStopModal:t})},e.handleMenuBtnClick=function(t,a){e.setState({anchorEl:t.currentTarget,menuStop:a})},e.handleMenuClose=function(){e.setState({anchorEl:null})},e.toggleEditModal=function(t,a,n){var r=Object(o.a)({},e.state.alert);a&&(r={open:!0,text:a,level:n||"info"}),e.setState({alert:r,showEditModal:t})},e.toggleDeleteModal=function(t,a,n){var r=Object(o.a)({},e.state.alert);a&&(r={open:!0,text:a,level:n||"info"}),e.setState({alert:r,showDeleteStopModal:t})},e.toggleEditStationModal=function(t,a,n){var r=Object(o.a)({},e.state.alert);a&&(r={open:!0,text:a,level:n||"info"}),e.setState({alert:r,showEditStationModal:t})},e.handleClose=function(t,a){"clickaway"!==a&&e.setState({alert:{open:!1}})},e.deleteStop=function(t,a){var n={trainName:a,trainStopId:t};e.setState({deleteStopData:n,showDeleteStopModal:!0})},e.editStop=function(t,a,n,r,l,i,o,c,s){var u={name:o,startStation:c,endStation:s},m=e.state.station.name;e.setState({editStopData:{id:t,ah:a,am:n,dh:r,dm:l,platform:i,station:m,train:u},showEditModal:!0})},e.editStation=function(){e.setState({showEditStationModal:!0})},e}return Object(q.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.name;Y.a.get("".concat(ie.API_HOST,"/api/station/name/").concat(t)).then((function(t){e.setState({station:t.data,stationLoading:!1})})),Y.a.get("".concat(ie.API_HOST,"/api/schedule/station/name/").concat(t)).then((function(t){e.setState({stops:t.data,scheduleLoading:!1})}))}},{key:"render",value:function(){var e,t=this,a=this.state,n=a.stationLoading,l=a.scheduleLoading,i=this.props.classes;if(n||l)e=r.a.createElement(ce.a,{className:re.a.centerScreen});else{var o=this.state.stops.map((function(e){var a="N/A",n="N/A";e.trainSource!==t.state.station.name&&(a=ae()("".concat(e.ah,":").concat(e.am),"HH:mm").format("hh:mm a")),e.trainDestination!==t.state.station.name&&(n=ae()("".concat(e.dh,":").concat(e.dm),"HH:mm").format("hh:mm a"));var l=Ke(e.trainName,e.trainSource,e.trainDestination);return r.a.createElement(he.a,{item:!0,xs:12,sm:6,md:4,key:e.id},r.a.createElement(Ce.a,{elevation:3},r.a.createElement(Ie.a,null,r.a.createElement(S.a,{variant:"h5",gutterBottom:!0},l),r.a.createElement(S.a,{color:"textSecondary",variant:"body2"},"Train Type : ",e.trainType),r.a.createElement(S.a,{color:"textSecondary",variant:"body2"},"Runs on : ",e.trainAvailability),r.a.createElement(S.a,{variant:"body1"},"Arrival : ",a),r.a.createElement(S.a,{variant:"body1"},"Departure : ",n),r.a.createElement(S.a,{variant:"body1"},e.platform?"Platform: ".concat(e.platform):"")),r.a.createElement(Xe.a,null,r.a.createElement(F.a,{to:"/schedule/train/".concat(e.trainId)},r.a.createElement(pe.a,{variant:"contained",color:"primary",size:"small"},"Schedule")),r.a.createElement(pe.a,{color:"secondary",variant:"contained","aria-haspopup":"true","aria-controls":"simple-menu",size:"small",className:i.margin,onClick:function(a){return t.handleMenuBtnClick(a,e)}},"More.."))))}));e=r.a.createElement(r.a.Fragment,null,r.a.createElement(he.a,{container:!0,spacing:1,direction:"column"},r.a.createElement("h3",{className:"p-2 text-center"},"Station Schedule - ",this.state.station.name),r.a.createElement(he.a,{container:!0,item:!0},r.a.createElement(he.a,{item:!0},r.a.createElement(S.a,{variant:"body1",display:"inline"},"Telephone : \xa0"),r.a.createElement(S.a,{variant:"body2",display:"inline"},this.state.station.tel?this.state.station.tel:"Not Available"))),r.a.createElement(he.a,{container:!0,item:!0,justify:"flex-end"},r.a.createElement(pe.a,{variant:"contained",color:"primary",href:"/trains/new",className:i.margin},"Add New Train"),r.a.createElement(pe.a,{variant:"contained",color:"secondary",onClick:this.editStation,className:i.margin},"Edit Station")),r.a.createElement(he.a,{container:!0,item:!0,spacing:1},o)),r.a.createElement(Qe.a,{id:"actions-menu",anchorEl:this.state.anchorEl,keepMounted:!0,open:Boolean(this.state.anchorEl),onClose:this.handleMenuClose},r.a.createElement(Ze.a,{onClick:function(){t.editStop(t.state.menuStop.id,t.state.menuStop.ah,t.state.menuStop.am,t.state.menuStop.dh,t.state.menuStop.dm,t.state.menuStop.platform,t.state.menuStop.trainName,t.state.menuStop.trainSource,t.state.menuStop.trainDestination),t.handleMenuClose()}},"Edit Time or Platform"),r.a.createElement(Ze.a,{onClick:function(){t.deleteStop(t.state.menuStop.id,t.state.menuStop.trainName),t.handleMenuClose()}},"Delete")),r.a.createElement(se.a,{open:this.state.alert.open,anchorOrigin:{vertical:"top",horizontal:"center"},autoHideDuration:5e3,onClose:this.handleClose},r.a.createElement(ue.a,{elevation:6,varient:"filled",onclose:this.handleClose,severity:this.state.alert.level},this.state.alert.text)),r.a.createElement(We,{isOpen:this.state.showEditModal,setOpen:this.toggleEditModal,trainStop:this.state.editStopData}),r.a.createElement(Ye,{isOpen:this.state.showDeleteStopModal,setOpen:this.toggleDeleteModal,stationName:this.state.station.name,trainName:this.state.deleteStopData.trainName,trainStopId:this.state.deleteStopData.trainStopId}),r.a.createElement($e,{isOpen:this.state.showEditStationModal,setOpen:this.toggleEditStationModal,station:this.state.station}))}var c="Schedule of ".concat(this.state.station.name," Station | Trains - Sri Lanka"),s="The Schedule/Timetable of the ".concat(this.state.station.name," railway station, with arrival/departure times and other details of trains");return r.a.createElement(Le.a,null,r.a.createElement(oe.Helmet,null,r.a.createElement("title",null,c),r.a.createElement("meta",{name:"description",content:s})),e)}},{key:"onTrainStopUpdated",value:function(e,t,a,n,r,l){var i=this.state.stops;i.forEach((function(i){i.id===e&&(i.ah=t,i.am=a,i.dh=n,i.dm=r,i.platform=l)})),this.setState({stops:i})}},{key:"toggleEditStop",value:function(){this.setState({showEditModal:!this.state.showEditModal})}},{key:"onTrainUpdated",value:function(e,t,a,n,r){var l=this.state.stops;l.forEach((function(n){n.trainId===e&&(n.trainName=t,n.trainType=r,n.trainAvailability=a)})),this.setState({stops:l})}}]),a}(n.Component),tt=Object(Je.a)((function(e){return{margin:{margin:e.spacing(1)}}}))(et);function at(e){var t=e.hour,a=e.min,n=!1;t>=24&&(t%=24,n=!0);var l=ae()().hour(t).minute(a).format("hh:mm a"),i="".concat(l).concat(n?"(Next Day)":"");return r.a.createElement(r.a.Fragment,null,i)}var nt=Object(Oe.b)((function(e){return{authState:e.auth}}),(function(e){return{updateTrain:function(t,a){return e(function(e,t){return function(a){var n={headers:{X_ID_TOKEN:t.idToken}};Y.a.put("".concat(ie.API_HOST,"/api/train/").concat(e.id),e,n).then((function(e){a({type:"UPDATE_TRAIN_SUCCESS"})})).catch((function(e){a(function(e){return{type:"UPDATE_TRAIN_FAILURE",payload:e}}(e.message))}))}}(t,a))}}}))((function(e){var t=e.isOpen,a=e.setOpen,l=e.train,i=e.stops,c=e.updateTrain,s=e.authState,m=Object(n.useState)(l),d=Object(u.a)(m,2),h=d[0],p=d[1],E=Object(n.useState)([]),f=Object(u.a)(E,2),g=f[0],S=f[1],v=Object(n.useState)([]),b=Object(u.a)(v,2),y=b[0],O=b[1],w=Object(n.useState)([]),T=Object(u.a)(w,2),_=T[0],j=T[1],C=Object(n.useState)(i),I=Object(u.a)(C,2),N=I[0],k=I[1],D=Object(n.useState)([]),A=Object(u.a)(D,2),x=A[0],M=A[1];h.id!==l.id&&p(l);var L=[];h.classes&&(L=h.classes.split(",").map((function(e){return e.trim()}))),Object(n.useEffect)((function(){k(i),Y.a.get("".concat(ie.API_HOST,"/api/station/list")).then((function(e){M(e.data)})),Y.a.get("".concat(ie.API_HOST,"/api/metadata/availabilities")).then((function(e){S(e.data)})),Y.a.get("".concat(ie.API_HOST,"/api/metadata/classes")).then((function(e){O(e.data)})),Y.a.get("".concat(ie.API_HOST,"/api/metadata/trainTypes")).then((function(e){j(e.data)}))}),[]);var H=g.map((function(e){return r.a.createElement("option",{value:e.code,key:e.code},e.displayName)})),P=[];N.forEach((function(e){P.push(e.stationId)}));var R=x.filter((function(e){return P.indexOf(e.id)>=0})),U=x.find((function(e){return e.id===h.startSt})),F=x.find((function(e){return e.id===h.endSt})),V=_.map((function(e){return r.a.createElement("option",{value:e,key:e},e)})),B=y.map((function(e){return r.a.createElement(Ae.a,{check:!0,inline:!0,key:e},r.a.createElement(xe.a,{check:!0},L.includes(e)?r.a.createElement(Me.a,{type:"checkbox",onChange:function(e){var t=L.map((function(e){return e}));t=t.filter((function(t){return t!==e.target.value}));var a=Object(o.a)(Object(o.a)({},h),{},{classes:t.join(", ")});p(a)},checked:!0,value:e}):r.a.createElement(Me.a,{type:"checkbox",onChange:function(e){var t=L.map((function(e){return e}));t.push(e.target.value);var a=Object(o.a)(Object(o.a)({},h),{},{classes:t.join(", ")});p(a)},checked:!1,value:e}),e))}));return l&&r.a.createElement(Fe.a,{isOpen:t,toggle:function(){return a(!t,null,null)},zIndex:1300},r.a.createElement(ze.a,{toggle:function(){return a(!t,null,null)}},"Edit Train"),r.a.createElement(Ve.a,null,r.a.createElement(Ge,null),s.isLoggedIn?r.a.createElement(r.a.Fragment,null,r.a.createElement(Ae.a,null,r.a.createElement(xe.a,{for:"name"},"Name"),r.a.createElement(Me.a,{type:"text",name:"name",id:"name",value:h.name,onChange:function(e){var t=Object(o.a)(Object(o.a)({},h),{},{name:e.target.value});p(t)}})),r.a.createElement(Ae.a,null,r.a.createElement(xe.a,{for:"avb"},"Availability"),r.a.createElement(Me.a,{type:"select",name:"avb",id:"avb",onChange:function(e){var t=Object(o.a)(Object(o.a)({},h),{},{avbValue:e.target.value,avb:e.target.options[e.target.selectedIndex].text});p(t)},key:h.avbValue,defaultValue:h.avbValue},r.a.createElement("option",{value:"",key:"unchanged"},"--Select--"),H)),r.a.createElement(Ae.a,null,r.a.createElement(xe.a,{for:"type"},"Type"),r.a.createElement(Me.a,{type:"select",name:"type",id:"type",onChange:function(e){var t=Object(o.a)(Object(o.a)({},h),{},{type:e.target.value});p(t)},key:h.avbValue,defaultValue:h.avbValue},r.a.createElement("option",{value:"",key:"unchanged"},"--Select--"),V)),r.a.createElement(Ae.a,null,r.a.createElement(xe.a,{for:"station"},"Starting Station"),r.a.createElement(Q.a,{id:"station",onChange:function(e,t){var a=t?parseInt(t.id):0;h.startSt=a},options:R.filter((function(e){return e!==F})),getOptionLabel:function(e){return e.name},defaultValue:U,renderInput:function(e){return r.a.createElement(X.a,Object.assign({},e,{label:"Starting Station",variant:"outlined",fullWidth:!0}))}})),r.a.createElement(Ae.a,null,r.a.createElement(xe.a,{for:"station"},"Destination Station"),r.a.createElement(Q.a,{id:"station",onChange:function(e,t){var a=t?parseInt(t.id):0;h.endSt=a},options:R.filter((function(e){return e!==U})),getOptionLabel:function(e){return e.name},defaultValue:F,renderInput:function(e){return r.a.createElement(X.a,Object.assign({},e,{label:"Destination Station",variant:"outlined",fullWidth:!0}))}})),r.a.createElement("p",null,"Classes Available"),B):""),r.a.createElement(Be.a,null,s.isLoggedIn?r.a.createElement(Ue.a,{color:"primary",onClick:function(e){c(h,s),a(!1,"Request Successful!","success")}},"Request Update"):"",r.a.createElement(Ue.a,{color:"secondary",onClick:function(){a(!1,null,null)}},"Cancel")))})),rt=a(293);var lt=Object(Oe.b)((function(e){return{authState:e.auth,stationData:e.stations}}),(function(e){return{fetchStations:function(){return e(Te())}}}))((function(e){var t=e.isOpen,a=e.setOpen,l=e.trainId,i=e.stationData,c=e.authState,s=e.fetchStations;Object(n.useEffect)((function(){s()}),[]);var m=Object(n.useState)({ah:0,dh:0}),d=Object(u.a)(m,2),h=d[0],p=d[1],E="";if(i.loading)E=r.a.createElement(ce.a,{className:re.a.centerScreen});else if(i.error)E=r.a.createElement("h2",{className:re.a.pageHead},i.error);else{var f=i.stations.sort((function(e,t){return e.name<t.name?-1:1})),g="",S=ae()("".concat(h.ah,":").concat(h.am),"HH:mm"),v=ae()("".concat(h.dh,":").concat(h.dm),"HH:mm");g=S.isSameOrAfter(v)?"Arrival time should be before departure time":g,g=h.stationId?g:"Please select station",console.log("trainStop.stationId",h.stationId),E=r.a.createElement(Fe.a,{isOpen:t,toggle:function(){return a(!t,null,null)},zIndex:1300},r.a.createElement(ze.a,{toggle:function(){return a(!t,null,null)}},"Add Train Stop"),r.a.createElement(Ve.a,null,r.a.createElement(Ge,null),c.isLoggedIn?r.a.createElement("div",null,g?r.a.createElement(rt.a,{color:"danger"},g):"",r.a.createElement(Ae.a,null,r.a.createElement(xe.a,{for:"station"},"Station"),r.a.createElement(Q.a,{id:"station",onChange:function(e,t){var a=t?parseInt(t.id):0,n=Object(o.a)({},h);n.stationId=a,p(n)},options:f,getOptionLabel:function(e){return e.name},renderInput:function(e){return r.a.createElement(X.a,Object.assign({},e,{label:"Station name",variant:"outlined",fullWidth:!0}))}})),r.a.createElement(Ae.a,null,r.a.createElement(Z.a,{utils:ee.a},r.a.createElement($.a,{className:"mx-1",label:"Arrival Time",value:S,onChange:function(e){var t=Object(o.a)({},h);t.ah=e.hour(),t.am=e.minute(),t.ah&&t.am&&0===t.dh&&0===t.dm&&(t.dm=t.am+1,t.dm>=60?(t.dm=t.dm-60,t.dh=t.ah+1):t.dh=t.ah),p(t)},KeyboardButtonProps:{"aria-label":"change time"}}),r.a.createElement($.a,{className:"mx-1",label:"Departure Time",value:v,onChange:function(e){var t=Object(o.a)({},h);t.dh=e.hour(),t.dm=e.minute(),p(t)},KeyboardButtonProps:{"aria-label":"change time"}}))),r.a.createElement(Ae.a,null,r.a.createElement(xe.a,{for:"platform"},"Platform"),r.a.createElement(Me.a,{type:"text",name:"platform",id:"platform",value:h.platform,onChange:function(e){var t=Object(o.a)({},h);t.platform=e.target.value,p(t)}}))):""),r.a.createElement(Be.a,null,r.a.createElement(Ue.a,{color:g?"secondary":"primary",onClick:function(){var e=Object(o.a)(Object(o.a)({},h),{},{trainId:l}),t={headers:{X_ID_TOKEN:c.idToken}};Y.a.post("".concat(ie.API_HOST,"/api/schedule/"),e,t).then((function(e){a(!1,"Request Successful!","success")})).catch((function(e){return a(!1,"Request Failed!","error")}))},disabled:g},"Request to Add")," ",r.a.createElement(Ue.a,{color:"secondary",onClick:function(){return a(!t,null,null)}},"Cancel")))}return r.a.createElement("div",null,E)}));var it=Object(Oe.b)((function(e){return{authState:e.auth}}))((function(e){var t=e.isOpen,a=e.setOpen,n=e.trainId,l=e.authState;return r.a.createElement(Fe.a,{isOpen:t,toggle:function(){return a(!t,null,null)},zIndex:1300},r.a.createElement(ze.a,{toggle:function(){return a(!t,null,null)}},"Delete Train"),r.a.createElement(Ve.a,null,r.a.createElement(Ge,null),l.isLoggedIn?r.a.createElement("div",null,r.a.createElement("hr",null),r.a.createElement("p",null,"Are you sure you want to delete the train?")):""),r.a.createElement(Be.a,null,l.isLoggedIn?r.a.createElement(Ue.a,{color:"danger",onClick:function(){!function(){var e={headers:{X_ID_TOKEN:l.idToken}};Y.a.delete("".concat(ie.API_HOST,"/api/train/").concat(n),e).then((function(e){a(!1,"Request Successful!","success")})).catch((function(e){return a(!1,"Request Failed!","error")}))}(),a(!t,null,null)}},"Request Delete"):"",r.a.createElement(Ue.a,{color:"secondary",onClick:function(){return a(!t,null,null)}},"Cancel")))}));var ot=Object(Oe.b)((function(e){return{authState:e.auth}}))((function(e){var t=e.isOpen,a=e.setOpen,l=e.trainId,i=e.authState,o=Object(n.useState)(0),c=Object(u.a)(o,2),s=c[0],m=c[1];return r.a.createElement(Fe.a,{isOpen:t,toggle:function(){return a(!t,null,null)},zIndex:1300},r.a.createElement(ze.a,{toggle:function(){return a(!t,null,null)}},"Merge Connecting Train"),r.a.createElement(Ve.a,null,r.a.createElement(Ge,null),i.isLoggedIn?r.a.createElement("div",null,r.a.createElement("p",null,"Open the other train you want to merge into this in a different tab/window and enter the ID of that train here. Train ID is the number that can be found at the end of the URL (of the other train)"),r.a.createElement(Ae.a,null,r.a.createElement(xe.a,{for:"name"},"Merging Train Id"),r.a.createElement(Me.a,{type:"number",name:"mergingId",id:"mergingId",value:s,onChange:function(e){m(e.target.value)}}))):""),r.a.createElement(Be.a,null,i.isLoggedIn&&s>0?r.a.createElement(Ue.a,{color:"danger",onClick:function(){!function(){var e={headers:{X_ID_TOKEN:i.idToken}},t={train1:l,train2:s};Y.a.post("".concat(ie.API_HOST,"/api/train/merge"),t,e).then((function(e){a(!1,"Request Successful!","success")})).catch((function(e){return a(!1,"Request Failed!","error")}))}(),a(!t,null,null)}},"Request Merge"):"",r.a.createElement(Ue.a,{color:"secondary",onClick:function(){return a(!t,null,null)}},"Cancel")))})),ct=function(e){Object(z.a)(a,e);var t=Object(K.a)(a);function a(){var e;Object(G.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={trainLoading:!0,scheduleLoading:!0,train:{},stops:[],editStopData:{id:"",ah:"",am:"",dh:"",dm:"",platform:"",station:"",train:""},deleteStopData:{id:"",stationName:"",trainName:""},confirmationMsg:null,confirmationCb:null,showEditModal:!1,showEditTrainModal:!1,showAddStopModal:!1,showDeleteStopModal:!1,showDeleteTrainModal:!1,showMergeTrainModal:!1,anchorEl:null,menuStop:null,alert:{open:!1,text:"",level:""}},e.toggleEditTrainModal=function(t,a,n){var r=Object(o.a)({},e.state.alert);a&&(r={open:!0,text:a,level:n||"info"}),e.setState({alert:r,showEditTrainModal:t})},e.showEditTrainStopModal=function(t){e.setState({showEditModal:t})},e.showDeleteStopModal=function(t){e.setState({showDeleteStopModal:t})},e.toggleEditModal=function(t,a,n){var r=Object(o.a)({},e.state.alert);a&&(r={open:!0,text:a,level:n||"info"}),e.setState({alert:r,showEditModal:t})},e.toggleDeleteModal=function(t,a,n){var r=Object(o.a)({},e.state.alert);a&&(r={open:!0,text:a,level:n||"info"}),e.setState({alert:r,showDeleteStopModal:t})},e.toggleMergeModal=function(t,a,n){var r=Object(o.a)({},e.state.alert);a&&(r={open:!0,text:a,level:n||"info"}),e.setState({alert:r,showMergeTrainModal:t})},e.toggleAddStopModal=function(t,a,n){var r=Object(o.a)({},e.state.alert);a&&(r={open:!0,text:a,level:n||"info"}),e.setState({alert:r,showAddStopModal:t})},e.toggleDeleteTrainModal=function(t,a,n){var r=Object(o.a)({},e.state.alert);a&&(r={open:!0,text:a,level:n||"info"}),e.setState({alert:r,showDeleteTrainModal:t})},e.handleClose=function(t,a){"clickaway"!==a&&e.setState({alert:{open:!1}})},e.handleMenuBtnClick=function(t,a){e.setState({anchorEl:t.currentTarget,menuStop:a})},e.handleMenuClose=function(){e.setState({anchorEl:null})},e.toggleAddNewStop=function(){e.setState({showAddStopModal:!e.state.showAddStopModal})},e.toggleDeleteTrain=function(){e.setState({showDeleteTrainModal:!e.state.showDeleteTrainModal})},e.toggleConfirmation=function(){e.setState({confirmationMsg:null})},e.editStop=function(t,a,n,r,l,i,o,c){e.setState({editStopData:{id:t,ah:a,am:n,dh:r,dm:l,platform:i,station:o,train:c},showEditModal:!0})},e.deleteStop=function(t,a,n){e.setState({deleteStopData:{id:t,stationName:a,trainName:n},showDeleteStopModal:!0})},e.refresh=function(){window.location.reload()},e}return Object(q.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.id;Y.a.get("".concat(ie.API_HOST,"/api/train/").concat(t)).then((function(t){e.setState({train:t.data,trainLoading:!1})})),Y.a.get("".concat(ie.API_HOST,"/api/schedule/train/").concat(t)).then((function(t){e.setState({stops:t.data,scheduleLoading:!1})}))}},{key:"render",value:function(){var e,t=this,a=this.state,n=a.scheduleLoading,l=a.trainLoading,i=Ke(this.state.train.name,this.state.train.startStation,this.state.train.endStation),o="Schedule of "+i+" Train | Trains - Sri Lanka",c="The list of stations the train stops, the days of week the train runs, the type of the train"+i+" and the classes available";if(n||l)e=r.a.createElement(ce.a,{className:re.a.centerScreen});else{var s=0,u=this.state.stops.map((function(e){var a="N/A",n="N/A";return s++,e.stationId!==t.state.train.startSt&&(a=r.a.createElement(at,{hour:e.ah,min:e.am})),e.stationId!==t.state.train.endSt&&(n=r.a.createElement(at,{hour:e.dh,min:e.dm})),r.a.createElement(he.a,{item:!0,xs:12,sm:6,md:4,key:e.id},r.a.createElement(Ce.a,null,r.a.createElement(Ie.a,null,r.a.createElement(S.a,{color:"textSecondary"},"#",s),r.a.createElement(S.a,{variant:"h5",gutterBottom:!0},e.stationName),r.a.createElement(S.a,{variant:"body1"},"Arrival : ",a),r.a.createElement(S.a,{variant:"body1"},"Departure : ",n),r.a.createElement(S.a,{variant:"body1"},e.platform?"Platform: ".concat(e.platform):"")),r.a.createElement(Xe.a,null,r.a.createElement(F.a,{to:"/schedule/station/".concat(e.stationName)},r.a.createElement(pe.a,{variant:"contained",color:"primary",size:"small"},"Schedule")),r.a.createElement(pe.a,{color:"secondary",variant:"contained","aria-haspopup":"true","aria-controls":"simple-menu",size:"small",onClick:function(a){return t.handleMenuBtnClick(a,e)}},"More.."))))})),m={id:this.state.train.id,name:this.state.train.name,avbValue:this.state.train.avbValue,type:this.state.train.type,classes:this.state.train.classes,startSt:this.state.train.startSt,endSt:this.state.train.endSt};e=r.a.createElement(r.a.Fragment,null,r.a.createElement(he.a,{container:!0,spacing:1,direction:"column"},r.a.createElement("h3",{className:"p-2 text-center"},"Train Schedule : ",i),r.a.createElement("div",null,r.a.createElement(S.a,{variant:"body1"},"Runs on : ",this.state.train.avb),r.a.createElement(S.a,{variant:"body1"},"Type : ",this.state.train.type),r.a.createElement(S.a,{variant:"body1"},"Classes : ",this.state.train.classes)),r.a.createElement(he.a,{container:!0,item:!0,justify:"flex-start"},r.a.createElement(pe.a,{variant:"contained",color:"primary",size:"small",className:"mb-1 mr-1",onClick:this.toggleAddNewStop},"Add a missing stop"),r.a.createElement(pe.a,{variant:"contained",color:"secondary",size:"small",className:"mb-1 mr-1",onClick:this.toggleEditTrainModal},"Edit Train"),r.a.createElement(pe.a,{variant:"contained",color:"secondary",size:"small",className:"mb-1 mr-1",onClick:this.toggleMergeModal},"Merge Connecting Train"),r.a.createElement(pe.a,{variant:"contained",color:"secondary",size:"small",className:"mb-1 mr-1",onClick:this.toggleDeleteTrain},"Delete Train")),r.a.createElement(he.a,{container:!0,item:!0,spacing:1},u)),r.a.createElement(We,{isOpen:this.state.showEditModal,setOpen:this.toggleEditModal,trainStop:this.state.editStopData}),r.a.createElement(nt,{isOpen:this.state.showEditTrainModal,setOpen:this.toggleEditTrainModal,train:m,stops:this.state.stops}),r.a.createElement(lt,{isOpen:this.state.showAddStopModal,setOpen:this.toggleAddStopModal,trainId:this.props.match.params.id}),r.a.createElement(it,{isOpen:this.state.showDeleteTrainModal,setOpen:this.toggleDeleteTrainModal,trainId:this.props.match.params.id}),r.a.createElement(Ye,{isOpen:this.state.showDeleteStopModal,setOpen:this.toggleDeleteModal,trainStopId:this.state.deleteStopData.id,trainName:this.state.deleteStopData.trainName,stationName:this.state.deleteStopData.stationName}),r.a.createElement(ot,{isOpen:this.state.showMergeTrainModal,setOpen:this.toggleMergeModal,trainId:this.props.match.params.id}),r.a.createElement(Qe.a,{id:"actions-menu",anchorEl:this.state.anchorEl,keepMounted:!0,open:Boolean(this.state.anchorEl),onClose:this.handleMenuClose},r.a.createElement(Ze.a,{onClick:function(){t.editStop(t.state.menuStop.id,t.state.menuStop.ah,t.state.menuStop.am,t.state.menuStop.dh,t.state.menuStop.dm,t.state.menuStop.platform,t.state.menuStop.stationName,t.state.train),t.handleMenuClose()}},"Edit Time or Platform"),r.a.createElement(Ze.a,{onClick:function(){t.deleteStop(t.state.menuStop.id,t.state.menuStop.stationName,t.state.menuStop.trainName),t.handleMenuClose()}},"Delete")),r.a.createElement(se.a,{open:this.state.alert.open,anchorOrigin:{vertical:"top",horizontal:"center"},autoHideDuration:5e3,onClose:this.handleClose},r.a.createElement(ue.a,{elevation:6,varient:"filled",onclose:this.handleClose,severity:this.state.alert.level},this.state.alert.text)))}return r.a.createElement(Le.a,{className:"App Container"},r.a.createElement(oe.Helmet,null,r.a.createElement("title",null,o),r.a.createElement("meta",{name:"description",content:c})),e)}},{key:"onTrainStopUpdated",value:function(e,t,a,n,r,l){var i=this.state.stops;i.forEach((function(i){i.id===e&&(i.ah=t,i.am=a,i.dh=n,i.dm=r,i.platform=l)})),this.setState({stops:i})}},{key:"onTrainUpdated",value:function(e,t,a,n,r){var l=this.state.train;l.name=t,l.avb=a,l.classes=n,l.type=r,this.setState({train:l})}},{key:"toggleEditStop",value:function(){this.setState({showEditModal:!this.state.showEditModal})}}]),a}(n.Component),st=a(152),ut=function(e){var t=e/60>>0,a=e%60;return"".concat(t>0?t+"h ":"").concat(a,"m")},mt=a(155),dt=a.n(mt),ht=a(153),pt=a.n(ht);function Et(e){var t=e.station,a=e.waitTime;return r.a.createElement("div",null,r.a.createElement("hr",null),r.a.createElement("div",{className:re.a.switchAt},r.a.createElement("p",null,r.a.createElement(pt.a,null),"Switch at ",t," (Wait time: ",ut(a),")")),r.a.createElement("hr",null))}var ft=a(154),gt=a.n(ft);function St(e){var t=e.train,a=e.from,n=e.to,l="/schedule/train/".concat(t.id),i="/schedule/station/".concat(a.station),o="/schedule/station/".concat(n.station);return r.a.createElement("div",{className:re.a.resultHop},r.a.createElement("div",{className:re.a.trainTravel},r.a.createElement("div",null,r.a.createElement(gt.a,null),r.a.createElement("a",{href:l},"".concat(function(e,t,a){var n="".concat(t," \u2192 ").concat(a);return e&&(n="".concat(e," (").concat(n,")")),n}(t.name,t.startStation,t.endStation)," "),"Train"))),r.a.createElement("div",{className:re.a.stations},r.a.createElement("div",{className:re.a.station},r.a.createElement("p",null,r.a.createElement("a",{href:i},a.station))),r.a.createElement("div",{className:re.a.station},r.a.createElement("p",null,r.a.createElement("a",{href:o},n.station)))),r.a.createElement("div",{className:re.a.separator},r.a.createElement("div",{className:re.a.nodeDot}),r.a.createElement("div",{className:re.a.straightLine}),r.a.createElement("div",{className:re.a.dashedLine}),r.a.createElement("div",{className:re.a.nodeDot})),r.a.createElement("div",{className:re.a.times},r.a.createElement("div",{className:re.a.time},r.a.createElement(at,{hour:a.hour,min:a.min})),r.a.createElement("div",{className:re.a.time},r.a.createElement(at,{hour:n.hour,min:n.min}))))}function vt(e){var t,a=e.id,n=e.trainTravels,l=e.transits,i=e.duration,o=[],c=Object(st.a)(n.entries());try{for(c.s();!(t=c.n()).done;){var s=Object(u.a)(t.value,2),m=s[0],d=s[1];if(m>0){var h=r.a.createElement(Et,{station:l[m-1].station,waitTime:l[m-1].waitTime});o.push(h)}var p=r.a.createElement(St,{train:d.train,from:d.from,to:d.to});o.push(p)}}catch(E){c.e(E)}finally{c.f()}return o=o.map((function(e,t){return r.a.createElement("div",{key:t,className:re.a.resultItemBody},e)})),r.a.createElement(Le.a,{className:re.a.resultItem},r.a.createElement(Pe.a,null,r.a.createElement(Re.a,{md:"1",xs:"12"},r.a.createElement("div",{className:re.a.centerVertical},r.a.createElement(Pe.a,null,r.a.createElement(Re.a,{md:"12",xs:"4"},r.a.createElement("h2",null,"#",a)),r.a.createElement(Re.a,{md:"12",xs:"4"},r.a.createElement(dt.a,null),r.a.createElement("p",null,ut(i))),r.a.createElement(Re.a,{md:"12",xs:"4"},r.a.createElement("p",null,n.length," Trains"))))),r.a.createElement(Re.a,{md:"11"},r.a.createElement(Le.a,null,o))))}var bt=function(e){Object(z.a)(a,e);var t=Object(K.a)(a);function a(){var e;Object(G.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={loading:!0,error:null,results:[]},e}return Object(q.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params,a=t.from,n=t.to,r=t.date,l=t.time,i="".concat(ie.API_HOST,"/api/search/from/").concat(a,"/to/").concat(n);i=l?"".concat(i,"/").concat(l,"/onward"):i,i=r?"".concat(i,"/on/").concat(r):i,Y.a.get(i).then((function(t){e.setState({results:t.data,loading:!1})})).catch((function(t){e.setState({error:t,loading:!1})}))}},{key:"render",value:function(){var e,t=this.props.match.params,a=t.from,n=t.to,l=t.date,i=t.time,o="Train schedule from ".concat(a," to ").concat(n," | Trains - Sri Lanka"),c="Train schedule from ".concat(a," to ").concat(n," with the train details, where to switch trains, and journey times");if(this.state.loading)e=r.a.createElement(ce.a,{className:re.a.centerScreen});else{var s=this.state.results.map((function(e){return r.a.createElement(vt,{key:e.number,id:e.number,trainTravels:e.trainHops,transits:e.transits,duration:e.duration})})),u=l?"on ".concat(ae()(l,"YYYY-MM-DD").format("dddd, MMMM Do YYYY")):"today";u=i?"".concat(u,", ").concat(i," onwards"):"from now",e=r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",{className:"".concat(re.a.center," ").concat(re.a.pageHead)},a," to ",n),r.a.createElement("h6",{className:re.a.center},u),r.a.createElement(ue.a,{severity:"info"},"You can view Train/Station schedules by clicking the train/station name. If any data is wrong, help us correct those by choosing edit options at those relevant pages."),s)}return r.a.createElement(Le.a,null,r.a.createElement(oe.Helmet,null,r.a.createElement("title",null,o),r.a.createElement("meta",{name:"description",content:c})),e)}}]),a}(n.Component);function yt(){return r.a.createElement("div",{className:re.a.centerMessage},r.a.createElement("h2",null,"404 - Not Found"),r.a.createElement("p",null,"The URL you requested is not available in this site"))}function Ot(){return r.a.createElement(Le.a,null,r.a.createElement("h1",{className:"".concat(re.a.center," ").concat(re.a.pageHead)},"Trains Sri Lanka"),r.a.createElement("p",null,"Train Sri Lanka helps you to smartly search trains in Sri Lanka and view the timetables of both trains and stations. It gives you the list of options that you can travel between any two stations."),r.a.createElement("hr",null),r.a.createElement("h2",null,"Features"),r.a.createElement("ul",null,r.a.createElement("li",null,"Search for trains between any two stations in Sri Lanka at any date/time."),r.a.createElement("li",null,"View full time table of any train or station"),r.a.createElement("li",null,"View telephone numbers of all major stations in case you need any additional information"),r.a.createElement("li",null,"Suggest ammendments to any wrong data, and review suggestions by others")),r.a.createElement("hr",null),r.a.createElement("h2",null,"Seeing Any Wrong Data?"),r.a.createElement("p",null,"We are trying to keep the data up to date as much as possible. However, there might be cases where any new changes in the schedules may get time to reflect here. We are extremely sorry, if you had to face any inconveniece in such instance. "),r.a.createElement("p",null,"However, you can now suggest the new changes and get it reflected by yourself. At any of,"),r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("a",{href:"/stations"},"Station list page")),r.a.createElement("li",null,"Station view page"),r.a.createElement("li",null,"Train view page")),r.a.createElement("p",null," you can find the options to suggest the changes to any data errors. The suggestions are listed to be ",r.a.createElement("a",{href:"/pendingChanges"},"reviewed")," by others and once a suggestion get a considerable amount of reviews, the change will automatically be applied."),r.a.createElement("p",null,"The suggesters and the approvers will also get a reputation score upon successful change. The reputation score is considered when approving the suggestions (only less number of reputed voters will require to accept a suggestion)"),r.a.createElement("hr",null),r.a.createElement("h2",null,"Contact Developers"),r.a.createElement("p",null,"Please send a mail to ",r.a.createElement("u",null,"sltf-dev@googlegroups.com")))}var wt=a(294),Tt=a(156),_t=a.n(Tt),jt=a(157),Ct=a.n(jt);var It=Object(Oe.b)((function(e){return{authState:e.auth}}),(function(e){return{votePendingChange:function(t,a,n){return e(function(e,t,a){return function(n){n(je);var r={headers:{X_ID_TOKEN:a.idToken}},l={requestId:e,voter:"UNKNOWN",vote:t,comment:""};Y.a.post("".concat(ie.API_HOST,"/api/vote/"),l,r).then((function(e){n({type:"VOTE_PENDING_CHANGE_SUCCESS"})})).catch((function(e){var t=e.message;n(function(e){return{type:"VOTE_PENDING_CHANGE_FAILURE",payload:e}}(t))}))}}(t,a,n))}}}))((function(e){var t=e.isOpen,a=e.setOpen,n=e.itemToVote,l=e.vote,i=e.authState,o=e.votePendingChange;return n&&r.a.createElement(Fe.a,{isOpen:t,toggle:function(){return a(!t,null,null)},zIndex:1300},r.a.createElement(ze.a,{toggle:function(){return a(!t,null,null)}},"Confirmation"),r.a.createElement(Ve.a,null,r.a.createElement(Ge,null),i.isLoggedIn?r.a.createElement("p",null,"You're email ",i.userId," will be recorded to ensure no multiple votes for same request from same user."):""),r.a.createElement(Be.a,null,i.isLoggedIn?r.a.createElement(Ue.a,{color:"primary",onClick:function(){o(n,l,i),a(!t,"Vote Submitted!","success")}},l?"Upvote":"Downvote"):"",r.a.createElement(Ue.a,{color:"secondary",onClick:function(){return a(!t,null,null)}},"Cancel")))})),Nt=Object(s.a)({loadingContainer:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"},pageHead:{textAlign:"center",padding:"10px"},newValue:{backgroundColor:"#bbffbb"},oldValue:{backgroundColor:"#ffbbbb",textDecoration:"line-through"}});var kt=Object(Oe.b)((function(e){return{pendingChanges:e.pendingChanges,authData:e.auth}}),(function(e){return{fetchPendingChanges:function(t,a){return e(function(e,t){return function(a){a(_e);var n=e.isLoggedIn?{headers:{X_ID_TOKEN:e.idToken}}:{};Y.a.get("".concat(ie.API_HOST,"/api/dataChangeRequest/list?page=").concat(t),n).then((function(e){var t=e.data;a(function(e){return{type:"FETCH_PENDING_CHANGES_SUCCESS",payload:e}}(t))})).catch((function(e){var t=e.message;a(function(e){return{type:"FETCH_PENDING_CHANGES_FAILURE",payload:e}}(t))}))}}(t,a))}}}))((function(e){var t=e.pendingChanges,a=e.authData,l=e.fetchPendingChanges,i=e.location;Object(n.useEffect)((function(){var e=new URLSearchParams(i.search).get("page");l(a,e=e||0)}),[]);var c=Object(n.useState)(null),s=Object(u.a)(c,2),m=s[0],d=s[1],h=Object(n.useState)(!1),p=Object(u.a)(h,2),E=p[0],f=p[1],g=Object(n.useState)(!1),v=Object(u.a)(g,2),b=v[0],y=v[1],O=Object(n.useState)({open:!1,level:"",text:""}),w=Object(u.a)(O,2),T=w[0],_=w[1],j=Nt(),C=function(e,t){"clickaway"!==t&&_(Object(o.a)(Object(o.a)({},T),{},{open:!1}))},I="";if(t.loading)I=r.a.createElement("div",{className:j.loadingContainer},r.a.createElement(ce.a,null));else if(t.error)I=r.a.createElement("h2",null,t.error);else{var N=new URLSearchParams(i.search).get("page"),k=-1,D=-1;(N=N||0)>0&&(k=N-1),t.pendingChanges.length>=15&&(D=N+1);var A=t.pendingChanges.map((function(e){var t="";switch(e.action){case"ADD":t=e.changes.map((function(e){return r.a.createElement("div",{key:e.id},e.entityField," :"," ",r.a.createElement("span",{className:j.newValue},e.newValue)," ")}));break;case"MODIFY":t=e.changes.map((function(e){return r.a.createElement("div",{key:e.id},e.entityField," updated to"," ",r.a.createElement("span",{className:j.newValue},e.newValue)," from"," ",r.a.createElement("span",{className:j.oldValue},e.oldValue),r.a.createElement("hr",null))}));break;case"DELETE":t=e.changes.map((function(e){return r.a.createElement("div",{key:e.id},e.entityField," was"," ",r.a.createElement("span",{className:j.oldValue},e.oldValue))}));break;case"MERGE":t=e.changes.map((function(e){return r.a.createElement("div",{key:e.id},"Will be merged with ",e.newValue)}))}return r.a.createElement(he.a,{item:!0,xs:12,sm:6,md:4,key:e.id},r.a.createElement(Ce.a,{className:j.root,variant:"outlined"},r.a.createElement(Ie.a,null,r.a.createElement(S.a,{color:"textSecondary",gutterBottom:!0},"#",e.id," : ",e.changes.length," change(s)"),r.a.createElement(S.a,{variant:"body1"},e.action," ",e.entityType),r.a.createElement(S.a,{variant:"h5"},e.entityId>0?e.entityName:""),r.a.createElement(S.a,{color:"textSecondary",gutterBottom:!0},"by ",e.initiator),r.a.createElement("hr",null),t),r.a.createElement(Xe.a,null,r.a.createElement(pe.a,{startIcon:r.a.createElement(_t.a,null),color:"primary",variant:"contained",onClick:function(){d(e.id),f(!0),y(!0)}},"Upvote"),r.a.createElement(pe.a,{startIcon:r.a.createElement(Ct.a,null),color:"default",variant:"contained",onClick:function(){d(e.id),f(!1),y(!0)}},"Downvote"))))}));I=r.a.createElement(Ee.a,null,r.a.createElement("h1",{className:j.pageHead},"Pending Changes List"),r.a.createElement(he.a,{direction:"row",container:!0,spacing:2},r.a.createElement(he.a,{container:!0,item:!0,xs:12,spacing:2,justify:"center"},r.a.createElement(wt.a,null,r.a.createElement(pe.a,{href:"?page=".concat(k),disabled:k<0},"<< Previous"),r.a.createElement(pe.a,{href:"?page=".concat(D),disabled:D<0},"Next >>"))),r.a.createElement(he.a,{container:!0,item:!0,spacing:2},A)),b&&r.a.createElement(It,{setOpen:function(e,t,a){y(e),t&&_({open:!0,level:a,text:t})},isOpen:b,vote:E,itemToVote:m}),r.a.createElement(se.a,{open:T.open,anchorOrigin:{vertical:"top",horizontal:"center"},autoHideDuration:5e3,onClose:C},r.a.createElement(ue.a,{elevation:6,varient:"filled",onclose:C,severity:T.level},T.text)))}return r.a.createElement("div",null,I)})),Dt=a(101),At=Object(s.a)((function(e){return{root:{display:"flex"},appBar:{zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{marginLeft:240,width:"calc(100% - ".concat(240,"px)"),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},menuButton:{marginRight:36},hide:{display:"none"},drawer:{width:240,flexShrink:0,whiteSpace:"nowrap"},drawerOpen:{width:240,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawerClose:Object(c.a)({transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),overflowX:"hidden",width:e.spacing(7)+1},e.breakpoints.up("sm"),{width:e.spacing(9)+1}),toolbar:Object(o.a)({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:e.spacing(0,1)},e.mixins.toolbar),content:{flexGrow:1,padding:e.spacing(3)}}}));function xt(){var e=At(),t=Object(ye.a)();return Dt.a.initialize(ie.GA_KEY),t.listen((function(e){Dt.a.pageview(e.pathname+e.search)})),Object(n.useEffect)((function(){Dt.a.pageview(window.location.pathname)}),[]),r.a.createElement("div",{className:e.root},r.a.createElement(be.b,{history:t},r.a.createElement(B,null),r.a.createElement("main",{className:e.content},r.a.createElement("div",{className:e.toolbar}),r.a.createElement(be.c,null,r.a.createElement(be.a,{exact:!0,path:"/",component:ve}),r.a.createElement(be.a,{exact:!0,path:"/stations",component:De}),r.a.createElement(be.a,{exact:!0,path:"/review",component:kt}),r.a.createElement(be.a,{exact:!0,path:"/about",component:Ot}),r.a.createElement(be.a,{exact:!0,path:"/trains/new",component:qe}),r.a.createElement(be.a,{exact:!0,path:"/schedule/station/:name",component:tt}),r.a.createElement(be.a,{exact:!0,path:"/schedule/train/:id",component:ct}),r.a.createElement(be.a,{exact:!0,path:"/schedule/from/:from/to/:to",component:bt}),r.a.createElement(be.a,{exact:!0,path:"/schedule/from/:from/to/:to/:time/onward",component:bt}),r.a.createElement(be.a,{exact:!0,path:"/schedule/from/:from/to/:to/:time/onward/on/:date",component:bt}),r.a.createElement(be.a,{component:yt})))))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Mt=a(65),Lt=a(158),Ht=a(159),Pt=a(160),Rt=a.n(Pt),Ut={loading:!1,stations:[],error:""},Ft=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ut,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_STATIONS_REQUEST":case"UPDATE_STATION_REQUEST":return Object(o.a)(Object(o.a)({},e),{},{loading:!0,error:""});case"FETCH_STATIONS_SUCCESS":return Object(o.a)(Object(o.a)({},e),{},{loading:!1,stations:t.payload,error:""});case"UPDATE_STATION_SUCCESS":return Object(o.a)(Object(o.a)({},e),{},{loading:!1,error:""});case"FETCH_STATIONS_FAILURE":case"UPDATE_STATION_FAILURE":return Object(o.a)(Object(o.a)({},e),{},{loading:!1,error:t.payload});default:return e}},Vt={loading:!1,error:""},Bt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Vt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_TRAIN_REQUEST":return Object(o.a)(Object(o.a)({},e),{},{loading:!0,error:""});case"UPDATE_TRAIN_SUCCESS":return Object(o.a)(Object(o.a)({},e),{},{loading:!1,error:""});case"UPDATE_TRAIN_FAILURE":return Object(o.a)(Object(o.a)({},e),{},{loading:!1,error:t.payload});default:return e}},Gt={isLoggedIn:!1,userId:null,idToken:null},qt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOG_IN":return Object(o.a)(Object(o.a)({},e),{},{isLoggedIn:!0,userId:t.payload.userId,idToken:t.payload.idToken});case"LOG_OUT":return Object(o.a)(Object(o.a)({},e),{},{isLoggedIn:!1,userId:null,idToken:null});default:return e}},zt={loading:!1,pendingChanges:[],error:""},Kt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:zt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_PENDING_CHANGES_REQUEST":case"VOTE_PENDING_CHANGE_REQUEST":return Object(o.a)(Object(o.a)({},e),{},{loading:!0,error:""});case"FETCH_PENDING_CHANGES_SUCCESS":return Object(o.a)(Object(o.a)({},e),{},{loading:!1,pendingChanges:t.payload,error:""});case"VOTE_PENDING_CHANGE_SUCCESS":return Object(o.a)(Object(o.a)({},e),{},{loading:!1,error:""});case"FETCH_PENDING_CHANGES_FAILURE":case"VOTE_PENDING_CHANGE_FAILURE":return Object(o.a)(Object(o.a)({},e),{},{loading:!1,error:t.payload});default:return e}},Wt=Object(Mt.combineReducers)({stations:Ft,trains:Bt,pendingChanges:Kt,auth:qt}),Yt=Object(Mt.createStore)(Wt,Object(Ht.composeWithDevTools)(Object(Mt.applyMiddleware)(Rt.a,Lt.a))),Xt=a(161),Qt=a(295),Zt=a(99),Jt=Object(Xt.a)({palette:{primary:{main:"#1565c0",dark:"#0d47a1",light:"#90caf9"},secondary:Zt.a}});i.a.render(r.a.createElement(Oe.a,{store:Yt},r.a.createElement(Qt.a,{theme:Jt},r.a.createElement(xt,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[178,1,2]]]);
//# sourceMappingURL=main.f39fa13d.chunk.js.map